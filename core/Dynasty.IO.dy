module Dynasty.IO

getArgs = unsafejswhnf "({r:()=>process.argv.slice(2).reduceRight((t,h)=>({$:'::',$0:{v:h},$1:{v:t}}),{$:'Nil'})})" and
getChar = unsafejswhnf "({r:()=>{if(!fs)throw 'Unsupported IO';const b=Buffer.alloc(1);fs.readSync(0,b,0,1);return b.toString('utf8');}})" and
putChar c = unsafejs "({r:()=>{if(!fs)throw 'Unsupported IO';fs.writeSync(1,Buffer.from(e(_c)),0,1);return{$:'Tuple'};}})" and
readFile f = unsafejs "({r:()=>{if(!fs)throw 'Unsupported IO';return fs.readFileSync(e(_f),'utf8');}})"
